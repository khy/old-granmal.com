FROM centos

MAINTAINER Kevin Hyland, khy@me.com

WORKDIR /app

RUN yum update -y
RUN yum install -y curl git java-1.7.0-openjdk unzip

RUN curl -O http://downloads.typesafe.com/play/2.2.2/play-2.2.2.zip
RUN unzip play-2.2.2.zip
RUN export PATH=$PATH:play-2.2.2/play

RUN git clone https://github.com/khy/granmal.com.git

WORKDIR /app/granmal.com
RUN /app/play-2.2.1/play stage

ENTRYPOINT ["target/universal/stage/bin/granmal", "-Dconfig.file=conf/prod.conf", "-Dhttp.port=9000"]
EXPOSE 9000
